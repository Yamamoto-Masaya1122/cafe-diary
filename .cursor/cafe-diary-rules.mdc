---
description: "cafe-diary - ã‚«ãƒ•ã‚§æ—¥è¨˜ã‚·ã‚¹ãƒ†ãƒ ã®é–‹ç™ºãƒ«ãƒ¼ãƒ«"
globs: ["app/**/*.tsx", "components/**/*.tsx", "hooks/**/*.ts", "services/**/*.ts", "types/**/*.ts", "validations/**/*.ts", "utils/**/*.ts"]
alwaysApply: true
---

# cafe-diary - é–‹ç™ºãƒ«ãƒ¼ãƒ«

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

ã‚«ãƒ•ã‚§æ—¥è¨˜ã‚·ã‚¹ãƒ†ãƒ ã€Œcafe-diaryã€ã®ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³
- Next.js 15+ (App Router)
- TypeScript (strict mode)
- Tailwind CSS + shadcn/ui
- Atomic Design ãƒ‘ã‚¿ãƒ¼ãƒ³

## ğŸ§± Atomic Design å³å®ˆãƒ«ãƒ¼ãƒ«

### éšå±¤æ§‹é€ 
- `components/1_atoms/`: Button, Input, Label ãªã©æœ€å°å˜ä½
- `components/2_molecules/`: Form, Card, SearchBox ãªã©æ©Ÿèƒ½å˜ä½
- `components/3_organisms/`: Header, Sidebar, DataTable ãªã©è‡ªç«‹ã—ãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³
- `components/ui/`: shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- `components/providers/`: Context Providers

### å¿…é ˆéµå®ˆäº‹é …
1. **app/é…ä¸‹ã§ã®ç›´æ¥UIè¨˜è¿°ç¦æ­¢**: ãƒšãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¯è¤‡é›‘ãªJSXã‚’è¨˜è¿°ã—ãªã„
2. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†é›¢**: ã™ã¹ã¦ã®UIã¯é©åˆ‡ãªéšå±¤ã®ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¨ã—ã¦å®Ÿè£…
3. **æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå„ªå…ˆ**: æ–°è¦ä½œæˆå‰ã«æ—¢å­˜ã®æ‹¡å¼µã‚’æ¤œè¨
4. **å˜ä¸€è²¬ä»»åŸå‰‡**: å„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯æ˜ç¢ºãªè²¬å‹™ã‚’æŒã¤

## TypeScript ãƒ«ãƒ¼ãƒ«

### å‹å®‰å…¨æ€§
- `any`å‹ã®ä½¿ç”¨ã¯çµ¶å¯¾ç¦æ­¢ï¼ˆ`unknown`å‹ã‚’æ¤œè¨ï¼‰
- ã™ã¹ã¦ã®é–¢æ•°ãƒ»å¤‰æ•°ã«é©åˆ‡ãªå‹æ³¨é‡ˆ
- Zodã‚¹ã‚­ãƒ¼ãƒã«ã‚ˆã‚‹ãƒ©ãƒ³ã‚¿ã‚¤ãƒ å‹æ¤œè¨¼å¿…é ˆ

### å‹å®šç¾©ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// types/example.ts
import { z } from 'zod';

export const ExampleSchema = z.object({
  id: z.string(),
  name: z.string(),
  email: z.string().email(),
  createdAt: z.string().datetime(),
});

export type Example = z.infer<typeof ExampleSchema>;
```

## APIé€šä¿¡ãƒ«ãƒ¼ãƒ«

### ã‚µãƒ¼ãƒ“ã‚¹å±¤ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// services/exampleService.ts
import { api } from '@/lib/axios';
import { ExampleSchema, type Example } from '@/types/example';

export const exampleService = {
  async getAll(): Promise<Example[]> {
    const response = await api.get('/api/examples');
    return ExampleSchema.array().parse(response.data);
  }
};
```

### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// hooks/useExample.ts
export const useExample = (id: string) => {
  const [data, setData] = useState<Example | null>(null);
  const [loading, setLoading] = useState(true);
  const [error, setError] = useState<string | null>(null);

  // ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¿…é ˆ
  useEffect(() => {
    const fetchData = async () => {
      try {
        setLoading(true);
        const result = await exampleService.getById(id);
        setData(result);
      } catch (err) {
        setError(err instanceof Error ? err.message : 'Unknown error');
      } finally {
        setLoading(false);
      }
    };
    fetchData();
  }, [id]);

  return { data, loading, error };
};
```

## ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°ãƒ«ãƒ¼ãƒ«

### Tailwind CSSä½¿ç”¨æ–¹é‡
- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆã‚¢ãƒ—ãƒ­ãƒ¼ãƒ
- ã‚«ã‚¹ã‚¿ãƒ CSSæœ€å°åŒ–
- ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œï¼ˆãƒ¢ãƒã‚¤ãƒ«ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆï¼‰
- æ—¢å­˜ã‚¹ã‚¿ã‚¤ãƒ«ãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã®ä¸€è²«æ€§ç¢ºä¿

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°
```typescript
export const Button = ({ variant = 'primary', size = 'md', ...props }) => {
  const baseClasses = 'inline-flex items-center justify-center rounded-md font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 disabled:opacity-50';
  
  const variantClasses = {
    primary: 'bg-primary text-primary-foreground hover:bg-primary/90',
    secondary: 'bg-secondary text-secondary-foreground hover:bg-secondary/80',
  };
  
  const sizeClasses = {
    sm: 'h-9 px-3 text-xs',
    md: 'h-10 py-2 px-4 text-sm',
    lg: 'h-11 px-8 text-base',
  };
  
  return (
    <button 
      className={cn(baseClasses, variantClasses[variant], sizeClasses[size])}
      {...props}
    />
  );
};
```

## çŠ¶æ…‹ç®¡ç†ãƒ«ãƒ¼ãƒ«

### åŸºæœ¬æ–¹é‡
- ãƒ­ãƒ¼ã‚«ãƒ«çŠ¶æ…‹: `useState`, `useReducer`
- ã‚°ãƒ­ãƒ¼ãƒãƒ«çŠ¶æ…‹: `useContext` + `useReducer`ï¼ˆå¿…è¦ãªå ´åˆã®ã¿ï¼‰
- ã‚µãƒ¼ãƒãƒ¼çŠ¶æ…‹: ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯

### Contextä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³
```typescript
// providers/ExampleProvider.tsx
const ExampleContext = createContext<{
  state: ExampleState;
  dispatch: React.Dispatch<ExampleAction>;
} | null>(null);

export const useExample = () => {
  const context = useContext(ExampleContext);
  if (!context) {
    throw new Error('useExample must be used within ExampleProvider');
  }
  return context;
};
```

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### çµ±ä¸€çš„ãªã‚¨ãƒ©ãƒ¼å‡¦ç†
```typescript
// utils/error-handlers.ts
export const handleApiError = (error: unknown): string => {
  if (axios.isAxiosError(error)) {
    return error.response?.data?.message || error.message;
  }
  if (error instanceof Error) {
    return error.message;
  }
  return 'äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ';
};
```

## ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

### æ¨å¥¨äº‹é …
- å‹•çš„ã‚¤ãƒ³ãƒãƒ¼ãƒˆ: `React.lazy` + `Suspense`
- ãƒ¡ãƒ¢åŒ–: `React.memo`, `useMemo`, `useCallback`ã®é©åˆ‡ãªä½¿ç”¨
- ç”»åƒæœ€é©åŒ–: Next.js `Image`ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- ä¸è¦ãªã‚¤ãƒ³ãƒãƒ¼ãƒˆå‰Šé™¤

## å‘½åè¦å‰‡

- **ãƒ•ã‚¡ã‚¤ãƒ«å**: kebab-case (ä¾‹: `user-profile.tsx`)
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå**: PascalCase (ä¾‹: `UserProfile`)
- **é–¢æ•°ãƒ»å¤‰æ•°å**: camelCase (ä¾‹: `getUserData`)
- **å®šæ•°**: UPPER_SNAKE_CASE (ä¾‹: `API_BASE_URL`)
- **å‹å**: PascalCase (ä¾‹: `UserData`)

## ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

### å¿…é ˆå¯¾å¿œ
- ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³å¯¾å¿œ
- é©åˆ‡ãªARIAå±æ€§è¨­å®š
- ã‚»ãƒãƒ³ãƒ†ã‚£ãƒƒã‚¯HTMLä½¿ç”¨
- WCAG 2.1 AAæº–æ‹ ã®ã‚³ãƒ³ãƒˆãƒ©ã‚¹ãƒˆæ¯”

## ç¦æ­¢äº‹é …

âŒ **çµ¶å¯¾ç¦æ­¢**
- `app/`é…ä¸‹ã§ã®ç›´æ¥è¤‡é›‘ãªUIè¨˜è¿°
- `components/`é…ä¸‹ä»¥å¤–ã§ã®UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®šç¾©
- `any`å‹ã®ä½¿ç”¨
- `console.log`ã®æœ¬ç•ªç’°å¢ƒæ··å…¥
- æœªä½¿ç”¨ã‚¤ãƒ³ãƒãƒ¼ãƒˆãƒ»ã‚³ãƒ¼ãƒ‰
- å‹å®šç¾©ãªã—APIé€šä¿¡
- ã‚¤ãƒ³ãƒ©ã‚¤ãƒ³ã‚¹ã‚¿ã‚¤ãƒ«ä½¿ç”¨

## æ¨å¥¨äº‹é …

âœ… **ç©æ¥µæ¨å¥¨**
- æ—¢å­˜ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®å†åˆ©ç”¨
- å‹å®‰å…¨æ€§ç¢ºä¿
- åŒ…æ‹¬çš„ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
- ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£å¯¾å¿œ
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
- å¯èª­æ€§å‘ä¸Š
- é©åˆ‡ãªã‚³ãƒ¡ãƒ³ãƒˆï¼ˆè¤‡é›‘ãƒ­ã‚¸ãƒƒã‚¯ã®ã¿ï¼‰

## é–‹ç™ºãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼

### æ–°æ©Ÿèƒ½é–‹ç™ºæ‰‹é †
1. **è¦ä»¶åˆ†æ**: å¿…è¦ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ»å‹ã‚’ç‰¹å®š
2. **å‹å®šç¾©ä½œæˆ**: `types/`ã¨`validations/`ã«ã‚¹ã‚­ãƒ¼ãƒå®šç¾©
3. **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆå®Ÿè£…**: Atom â†’ Molecule â†’ Organismé †
4. **APIçµ±åˆ**: ã‚µãƒ¼ãƒ“ã‚¹å±¤ã¨ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯å®Ÿè£…
5. **ãƒ†ã‚¹ãƒˆ**: å‹•ä½œç¢ºèªã¨ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹å¯¾å¿œ
6. **ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°**: ã‚³ãƒ¼ãƒ‰æœ€é©åŒ–

### Gité‹ç”¨
- **ã‚³ãƒŸãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: æ—¥æœ¬èªã§æ˜ç¢ºã«è¨˜è¿°
- **ãƒ–ãƒ©ãƒ³ãƒå‘½å**: `feature/æ©Ÿèƒ½å`, `fix/ä¿®æ­£å†…å®¹`
- **ãƒ—ãƒ«ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: å°å˜ä½ã§é »ç¹ä½œæˆ

---

ã“ã®ãƒ«ãƒ¼ãƒ«ã«å¾“ã£ã¦ã€ä¿å®ˆæ€§ãŒé«˜ãæ‹¡å¼µã—ã‚„ã™ã„ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’æ§‹ç¯‰ã—ã¦ãã ã•ã„ã€‚
ç–‘å•ç‚¹ã¯æ—¢å­˜ã‚³ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã‚’å‚è€ƒã«ã€ä¸€è²«æ€§ã‚’æœ€å„ªå…ˆã¨ã—ã¦ãã ã•ã„ã€‚